<!DOCTYPE html>
<html lang="en">
  {% include head.html %}
  <body>
    {% if page.id == 'home' %}
    <div id="loading">
      <img src="{{ site.baseurl }}/assets/loader.svg" alt="Loading..." />
    </div>
    <div id="content" style="display: none;">
    {% else %}
    <div id="content">
    {% endif %}
      <nav>{% include nav.html %}</nav>
      <div class="wrapper">
        <main>{{ content }}</main>
        <footer>{% include footer.html %}</footer>
      </div>
    </div>
    {% include link-previews.html wrapperQuerySelector="content" %}
    {% if page.id == 'home' %}
    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
      #loading {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #fff;
        z-index: 9999;
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
        margin: 0;
        padding: 0;
      }
      #loading.fade-out {
        opacity: 0;
      }
      #loading img {
        width: 80px;
        height: 80px;
      }
      #content {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        width: 100%;
      }
      #content.fade-in {
        opacity: 1;
      }
    </style>
    <script>
      window.addEventListener('load', function() {
        const loading = document.getElementById('loading');
        const content = document.getElementById('content');
        
        content.style.display = 'block';
        
        setTimeout(function() {
          loading.classList.add('fade-out');
          content.classList.add('fade-in');
          
          loading.addEventListener('transitionend', function() {
            loading.style.display = 'none';
          });
        }, 1000);
      });
    </script>
    {% endif %}
  </body>
</html>
